<!doctype html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Calepinage de modules</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#f5f5f5">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icon-192.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="card">
    <h1>Calepinage de modules</h1>
    <p>
      La somme des modules est toujours <strong>≤ longueur du mur</strong>.<br>
      Les modules ont une <strong>hauteur max de 320 mm</strong> : on compose le meuble
      en <strong>plusieurs étages</strong> (160, 320, etc.) pour approcher au mieux la hauteur demandée.<br>
      Tu peux définir une <strong>plinthe/fileur bas</strong> et un <strong>top technique</strong>,
      puis laisser l’appli proposer une hauteur optimisée du corps du meuble.<br>
      Tu peux <strong>réordonner</strong> les modules (drag & drop),
      <strong>ajouter / supprimer</strong des modules par format, et
      <strong>sauvegarder / recharger</strong un projet.
    </p>
  </div>

  <div class="card">
    <h2>Paramètres</h2>

    <label for="wallLength">Longueur du mur (en mm)</label>
    <input id="wallLength" type="number" min="1" step="1" placeholder="ex : 3470">

    <label for="heightInput">Hauteur totale cible du meuble (en mm)</label>
    <input id="heightInput" type="number" min="1" step="1" placeholder="ex : 950">

    <label for="plinthInput">Hauteur plinthe / fileur bas (en mm, optionnelle)</label>
    <input id="plinthInput" type="number" min="0" step="1" placeholder="ex : 80">

    <label for="topInput">Hauteur top technique (en mm, optionnelle)</label>
    <input id="topInput" type="number" min="0" step="1" placeholder="ex : 60">

    <label for="vertModulesInput">Hauteurs possibles des étages (≤ 320 mm, séparées par des virgules)</label>
    <textarea id="vertModulesInput">320</textarea>
    <p class="hint">
      Par ex. <em>160, 320</em> pour faire des étages de 160 et 320 mm.<br>
      L’algorithme choisit une combinaison d’étages pour le <strong>corps du meuble</strong> (entre plinthe et top)
      qui ne dépasse pas la hauteur disponible et minimise l’écart.
    </p>

    <label for="modulesInput">Largeurs de modules (en mm, séparées par des virgules)</label>
    <textarea id="modulesInput">200, 240, 320, 480, 640, 960, 1280</textarea>

    <div class="preset-buttons">
      <p class="preset-label">
        Presets de formats :
      </p>
      <button type="button" id="presetStd">Standard 200–1280</button>
      <button type="button" id="preset300">Gamme 300 / 450 / 600 / 900 / 1200</button>
    </div>

    <p class="hint">
      Tu peux mettre d’autres formats, par ex : <em>300, 450, 600, 900, 1200</em>.<br>
      L’algorithme propose une combinaison initiale optimale sans dépasser le mur.
    </p>

    <label for="targetTol">Tolérance cible max (jeu résiduel horizontal, ± mm, optionnelle)</label>
    <input id="targetTol" type="number" min="0" step="1" placeholder="ex : 20">

    <button id="computeBtn">Calculer la combinaison optimale</button>

    <div id="error" class="error"></div>
  </div>

  <div id="output" class="card" style="display:none;"></div>

  <!-- html2canvas pour export PNG -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
