<!doctype html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Calepinage & meuble modulaire</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="card">
    <h1>Calepinage & meuble modulaire</h1>
    <p class="hint">
      - Ne dépasse jamais la longueur du mur<br>
      - Vue 1D / 2D / Vue éclatée<br>
      - Export PNG + PDF multi-pages<br>
      - Cut-list atelier (panneaux)<br>
      - Sauvegarde locale (projets)
    </p>
  </div>

  <div class="card">
    <h2>Paramètres</h2>

    <label for="wallLength">Longueur du mur (mm)</label>
    <input id="wallLength" type="number" min="1" step="1" placeholder="ex : 3520">

    <label for="heightInput">Hauteur totale cible (mm)</label>
    <input id="heightInput" type="number" min="1" step="1" placeholder="ex : 950">

    <label for="plinthInput">Plinthe / fileur bas (mm)</label>
    <input id="plinthInput" type="number" min="0" step="1" value="80">

    <label for="topInput">Fileur haut (mm)</label>
    <input id="topInput" type="number" min="0" step="1" value="60">

    <h2>Atelier</h2>

    <label for="depthInput">Profondeur caisson (mm)</label>
    <input id="depthInput" type="number" min="50" step="1" value="400">

    <label for="matThkInput">Épaisseur matériau (mm)</label>
    <input id="matThkInput" type="number" min="1" step="1" value="19">

    <label for="backThkInput">Épaisseur fond (mm)</label>
    <input id="backThkInput" type="number" min="0" step="1" value="8">

    <div class="row-check">
      <input id="includeBackInput" type="checkbox" checked>
      <label for="includeBackInput" class="inline-label">Inclure un fond pour chaque caisson</label>
    </div>
    <label for="assemblyMode">Mode d’assemblage</label>
<select id="assemblyMode">
  <option value="independent" selected>Assemblage par angles (caissons indépendants)</option>
  <option value="shared">Panneaux partagés (cloisons communes)</option>
</select>

<label for="cornerAllowance">Surcote usinage angles (mm)</label>
<input id="cornerAllowance" type="number" min="0" step="0.5" value="0">
<p class="hint">Si ta queue d’aronde “mange” un peu de matière ou impose une reprise, mets une surcote (ex: 1–2 mm) puis tu affleures.</p>


    <label for="vertModulesInput">Hauteurs d’étages possibles (≤ 320 mm)</label>
    <textarea id="vertModulesInput">160, 162, 164, 166, 168, 170, 172, 174, 176, 178, 180, 200, 240, 280, 320</textarea>

    <label for="modulesInput">Largeurs de modules possibles (mm)</label>
    <textarea id="modulesInput">200, 202, 204, 206, 208, 210, 280, 320, 360, 400, 480, 560, 640, 720, 800</textarea>

    <label for="targetTol">Tolérance cible max (jeu horizontal, mm, option)</label>
    <input id="targetTol" type="number" min="0" step="1" placeholder="ex : 2">

    <div class="btnrow">
      <button id="computeBtn">Calculer</button>
      <button id="presetMassifBtn" type="button">Preset bois massif (2 mm)</button>
    </div>

    <div id="error" class="error"></div>
  </div>

  <div class="card">
    <h2>Sauvegardes</h2>
    <label for="projectName">Nom du projet</label>
    <input id="projectName" type="text" placeholder="ex : Buffet salon - Mur Nord">

    <div class="btnrow">
      <button id="saveProjectBtn" type="button">Sauvegarder</button>
      <button id="exportJsonBtn" type="button">Exporter JSON</button>
      <button id="importJsonBtn" type="button">Importer JSON</button>
      <input id="importJsonFile" type="file" accept=".json" style="display:none;">
    </div>

    <div id="projectsList" class="projects"></div>
  </div>

  <div id="output" class="card" style="display:none;"></div>

  <!-- Dépendances -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <!-- App -->
  <script src="js/solver.js"></script>
  <script src="js/render.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
